## 외부 ID 공급자를 통한 연방 인증 환경 - SAML Assertion
### 예시: 대기업의 AWS 접근 관리

#### 상황
- **기업 상황:** 대형 기업이 있고, 이 기업은 자체적인 신원 인증 시스템을 가지고 있습니다. 예를 들어, Microsoft Active Directory나 Google Workspace와 같은 시스템이 있을 수 있습니다.
- **목적:** 이 기업의 직원들이 AWS 서비스에 접근할 필요가 있습니다. 하지만 기업은 모든 직원에게 별도의 AWS 자격 증명을 제공하고 관리하는 것을 원하지 않습니다.

#### 해결책: 연방 인증 사용
- **외부 ID 공급자:** 기업은 Microsoft Active Directory와 같은 외부 ID 공급자를 사용하여 직원들의 신원을 관리합니다.
- **SAML 연동:** 기업은 자체 ID 시스템과 AWS 간에 SAML(Security Assertion Markup Language) 2.0을 사용하여 연동합니다. SAML은 온라인 서비스 간의 신원 정보를 교환하기 위한 표준입니다.
-   - SAML(Security Assertion Markup Language) 어설션 : SSO를 사용하기 위한 신원 인증 및 권한 부여에 대한 정보를 담은 XML 문서

#### 실제 프로세스
1. **직원 로그인:** 직원은 기업의 싱글 사인온(SSO) 시스템을 사용하여 로그인합니다.
2. **SAML 어설션 생성:** 로그인에 성공하면, 신원 인증 시스템은 SAML 어설션을 생성합니다. 이 어설션은 사용자의 신원 정보와 그들이 접근할 수 있는 권한에 대한 정보를 담고 있습니다.
3. **AWS 접근:** 직원은 이 SAML 어설션을 사용하여 AWS에 접근합니다. 이 때 `sts:AssumeRoleWithSAML` API 호출이 이루어집니다. 이 API는 SAML 어설션을 받아 사용자가 AWS 내에서 가정할 IAM 역할을 결정합니다.
4. **역할 가정:** 사용자는 이제 AWS에서 해당 역할을 가지고 작업할 수 있습니다. 이 역할은 특정 AWS 리소스에 대한 접근 권한을 가지고 있습니다.

### 결론
이러한 방식으로, 기업은 자체적인 신원 인증 시스템을 통해 AWS 접근을 통합적으로 관리할 수 있습니다. 직원들은 별도의 AWS 자격 증명을 관리할 필요 없이, 기업의 싱글 사인온 시스템을 통해 AWS 서비스에 접근할 수 있습니다. 이러한 접근 방식은 보안을 강화하고, 자격 증명 관리를 간소화하는 데 도움이 됩니다.
